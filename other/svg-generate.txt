# Svg Generator
    function svg_generator(){
        $where              =   "type = 'RX' and ( product_img = '' or product_img = 'product.png') ";
        $products           =   $this->db->select('id, name, slug, strength, medicine_form, product_img, type, molecule')->where($where)->get('product')->result();
        
      
    $i  =   1;
    
    foreach($products as $row){
        
        $molecule_arr           =   [];
        
        $molecule_arr           =   explode('+', $row->molecule);
        
        $molecule_text          =   "";
        
        $text_style             =  strlen($row->name) > 14 && str_word_count($row->name) >= 3 ? 'style="font:message-box;"' : '' ; 
        $box_text_style         =  strlen($row->molecule) > 14 ? 'style="font:message-box;"' : '';
        
        if(count($molecule_arr) == 2):
        
            
            $molecule_text          =   '<text x="50%" y="20%" font-size="40" font-weight="bold"  dominant-baseline="middle" text-anchor="middle" fill="#fffefc">
                                            <tspan x="50%" y="35%">'.$molecule_arr[0].'</tspan>
                                            <tspan x="50%" y="70%">'.$molecule_arr[1].'</tspan>
                                         </text> ';
        elseif(count($molecule_arr) == 3):
            
            
            $molecule_text          =   '<text x="50%" y="20%" font-size="30" font-weight="bold"  dominant-baseline="middle" text-anchor="middle" fill="#fffefc">
                                            <tspan x="50%" y="25%">'.$molecule_arr[0].'</tspan>
                                            <tspan x="50%" y="50%">'.$molecule_arr[1].'</tspan>
                                            <tspan x="50%" y="75%">'.$molecule_arr[2].'</tspan>
                                         </text> ';
        elseif(count($molecule_arr) == 4):
            
            $molecule_text          =   '<text x="50%" y="20%" font-size="20" font-weight="bold"  dominant-baseline="middle" text-anchor="middle" fill="#fffefc">
                                            <tspan x="50%" y="20%">'.$molecule_arr[0].'</tspan>
                                            <tspan x="50%" y="40%">'.$molecule_arr[1].'</tspan>
                                            <tspan x="50%" y="60%">'.$molecule_arr[2].'</tspan>
                                            <tspan x="50%" y="80%">'.$molecule_arr[3].'</tspan>
                                         </text> ';
        else:
            $molecule_text          =   '<text x="50%" y="50%" font-size="50" font-weight="bold"  dominant-baseline="middle" text-anchor="middle" fill="#fffefc" '.$box_text_style.'>'.$row->molecule.'</text>';
        endif;
        

        ob_start();

        echo '<?xml version="1.0" encoding="utf-8"?>
                <svg width="500" height="500" xmlns="http://www.w3.org/2000/svg">

              <rect width="400" height="400" style="fill:rgb(30,160,218);stroke-width:4;stroke:rgb(255,254,252)" /> 
                <svg xmlns="http://www.w3.org/2000/svg" x="55%" y="-3%" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" width="100" height="100" version="1.1" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" viewBox="0 0 2267.53 1035.13">
             <defs>
              <font id="FontID1" horiz-adv-x="722" font-variant="normal" style="fill-rule:nonzero" font-style="normal" font-weight="700">
            	<font-face font-family="Arial">
            		<font-face-src>
            			<font-face-name name="Arial Bold"/>
            		</font-face-src>
            	</font-face>
               <missing-glyph><path d="M0 0z"/></missing-glyph>
               <glyph unicode="D" horiz-adv-x="722" d="M73.0036 716.005l263.668 0c59.4919,0 104.822,-4.49998 135.992,-13.6771 41.8345,-12.3307 77.8343,-34.3227 107.669,-65.9997 29.9999,-31.4999 52.6651,-70.1572 68.3383,-115.996 15.496,-45.6612 23.3267,-102.165 23.3267,-169.169 0,-58.9958 -7.33462,-109.665 -21.992,-152.326 -17.8346,-52.1691 -43.3345,-94.3343 -76.4997,-126.507 -25.0038,-24.496 -58.8423,-43.4998 -101.338,-57.1651 -31.8306,-10.1693 -74.3383,-15.1653 -127.665,-15.1653l-271.499 0 0 716.005zm144.992 -121.003l0 -473.998 107.504 0c40.1691,0 69.1651,2.32676 86.9997,6.82674 23.5038,5.83462 42.8384,15.8385 58.1691,29.8345 15.496,14.0078 28.0038,37.0038 37.6652,68.9997 9.83854,32.0077 14.6692,75.8383 14.6692,131.173 0,55.3344 -4.83069,97.665 -14.6692,127.334 -9.66138,29.6574 -23.3385,52.6651 -40.8305,69.3304 -17.5039,16.4999 -39.6731,27.8267 -66.673,33.6613 -19.996,4.49998 -59.4919,6.83856 -118.157,6.83856l-64.6769 0z"/>
               <glyph unicode="E" horiz-adv-x="667" d="M73.0036 0l0 716.005 529.994 0 0 -121.003 -385.002 0 0 -158.999 358.003 0 0 -121.003 -358.003 0 0 -193.995 399.01 0 0 -121.003 -544.002 0z"/>
               <glyph unicode="M" horiz-adv-x="833" d="M70.9958 0l0 716.005 217.168 0 128.338 -488.337 126.826 488.337 217.676 0 0 -716.005 -134.007 0 -0.496061 563.667 -141.165 -563.667 -139.334 0 -140.503 563.667 -0.496061 -563.667 -134.007 0z"/>
               <glyph unicode="S" horiz-adv-x="667" d="M34.9959 232.003l140.999 13.996c8.5039,-47.1612 25.4999,-81.6611 51.3423,-103.83 25.8306,-22.1692 60.6612,-33.1652 104.492,-33.1652 46.3345,0 81.3422,9.82673 104.834,29.492 23.5038,19.6653 35.3384,42.6731 35.3384,68.9997 0,17.0078 -5.00785,31.3345 -14.8346,43.3345 -9.83854,11.8346 -27.1652,22.1692 -51.8384,30.8385 -16.8306,5.99998 -55.1573,16.3346 -115.157,31.3345 -77.1729,19.3346 -131.338,42.992 -162.507,71.1611 -43.8305,39.5077 -65.669,87.6729 -65.669,144.507 0,36.4959 10.3346,70.8304 30.8385,102.661 20.6692,31.8306 50.3266,55.9958 89.1611,72.6729 38.8345,16.6653 85.4997,24.992 140.503,24.992 89.5036,0 157.003,-19.8306 202.168,-59.6691 45.3305,-39.8266 68.9997,-92.8225 71.3383,-159.33l-145.003 -4.99604c-6.16533,37.0038 -19.3346,63.4958 -39.5077,79.665 -20.1613,16.1692 -50.4919,24.3306 -90.8264,24.3306 -41.6691,0 -74.3383,-8.66926 -97.8303,-25.996 -15.1653,-11.1732 -22.8424,-25.996 -22.8424,-44.6691 0,-16.996 7.16926,-31.4999 21.5078,-43.4998 18.1653,-15.496 62.3265,-31.4999 132.496,-48.1652 70.169,-16.4999 121.996,-33.8384 155.503,-51.4959 33.6613,-17.8346 59.9998,-41.9998 79.0036,-72.8383 18.9921,-30.8385 28.4999,-68.8344 28.4999,-114 0,-40.9959 -11.3385,-79.4997 -34.1692,-115.334 -22.8306,-35.8345 -55.0037,-62.5037 -96.6728,-79.8304 -41.6691,-17.5039 -93.661,-26.1731 -155.834,-26.1731 -90.4957,0 -159.991,20.8346 -208.499,62.669 -48.4959,41.6691 -77.3265,102.496 -86.8343,182.338z"/>
              </font>
              <font id="FontID0" horiz-adv-x="667" font-variant="normal" style="fill-rule:nonzero" font-style="normal" font-weight="400">
            	<font-face font-family="Arial">
            		<font-face-src>
            			<font-face-name name="Arial"/>
            		</font-face-src>
            	</font-face>
               <missing-glyph><path d="M0 0z"/></missing-glyph>
               <glyph unicode="." horiz-adv-x="277" d="M91.0036 0l0 100.004 99.9917 0 0 -100.004 -99.9917 0z"/>
               <glyph unicode="G" horiz-adv-x="777" d="M412.002 280.995l0 83.9997 302.999 0 0 -265.334c-46.4998,-36.992 -94.4996,-64.9958 -143.999,-83.6572 -49.4998,-18.6732 -100.334,-28.0038 -152.338,-28.0038 -70.3344,0 -134.161,14.9999 -191.669,45.1652 -57.3305,29.9999 -100.83,73.6651 -129.992,130.499 -29.3385,56.9998 -44.0077,120.673 -44.0077,190.83 0,69.673 14.5039,134.669 43.6652,195.176 29.1731,60.3305 71.0076,105.165 125.669,134.326 54.673,29.3385 117.673,44.0077 188.999,44.0077 51.673,0 98.5035,-8.33855 140.338,-25.1692 41.8345,-16.8306 74.669,-40.1691 98.3382,-70.0037 23.8227,-29.9999 41.8227,-69.1651 54.1651,-117.33l-85.4997 -23.3385c-10.8425,36.3424 -24.1653,65.0076 -40.0038,86.0075 -16.0039,20.8346 -38.6691,37.4999 -68.3383,49.9959 -29.492,12.496 -62.3265,18.8385 -98.4917,18.8385 -43.1691,0 -80.5036,-6.6732 -112.169,-19.8424 -31.4999,-13.1574 -56.8344,-30.4959 -76.3343,-52.1573 -19.3346,-21.5078 -34.3345,-45.177 -44.9998,-70.8422 -18.1653,-44.492 -27.3306,-92.4918 -27.3306,-144.33 0,-64.0037 10.996,-117.496 32.8345,-160.665 21.992,-43.0038 53.9998,-74.9997 95.8343,-95.8343 41.9998,-20.8346 86.4918,-31.3345 133.665,-31.3345 40.9959,0 80.9997,7.99603 120,23.8346 38.9998,16.0039 68.4919,32.8345 88.665,50.9998l0 134.161 -209.999 0z"/>
               <glyph unicode="e" horiz-adv-x="556" d="M419.998 167.999l91.0036 -12c-14.1732,-52.8305 -40.6652,-94.0036 -79.3343,-123.165 -38.6691,-29.1731 -88.0036,-43.8305 -148.169,-43.8305 -75.6611,0 -135.661,23.3267 -179.999,69.9919 -44.3384,46.4998 -66.4958,112.003 -66.4958,196.169 0,86.9997 22.3346,154.665 67.1572,202.665 44.8345,48.177 103.004,72.1769 174.507,72.1769 69.1651,0 125.669,-23.5038 169.499,-70.6769 43.8305,-47.1612 65.8344,-113.492 65.8344,-198.991 0,-5.17321 -0.165354,-13.0039 -0.496061,-23.3385l-386.502 0c3.3307,-56.8344 19.3346,-100.5 48.3305,-130.665 28.8306,-30.1652 64.9958,-45.3305 108.165,-45.3305 32.1731,0 59.6691,8.49209 82.3343,25.4999 22.8306,16.996 40.8305,44.1612 54.1651,81.4957zm-287.999 140.999l289.003 0c-3.83857,43.6652 -14.9999,76.3343 -33.1652,98.1728 -27.8385,33.8266 -64.169,50.8226 -108.673,50.8226 -40.3345,0 -74.1611,-13.4999 -101.669,-40.4998 -27.3306,-26.9999 -42.4959,-63.1651 -45.4959,-108.496z"/>
               <glyph unicode="h" horiz-adv-x="556" d="M66.0107 0l0 716 87.9911 0 0 -257.67c40.8206,47.845 92.3406,71.6628 154.676,71.6628 38.1457,0 71.3139,-7.48959 99.6441,-22.6549 28.1674,-15.1653 48.3334,-36.0059 60.5215,-62.6614 12.1648,-26.6788 18.1657,-65.499 18.1657,-116.182l0 -328.495 -88.0143 0 0 328.17c0,43.8211 -9.48992,75.8263 -28.3302,95.8296 -19.0031,20.0033 -45.6586,30.0049 -80.3387,30.0049 -25.8182,0 -50.171,-6.67551 -72.9886,-20.1661 -22.8409,-13.5138 -39.0063,-31.8424 -48.8452,-55.009 -9.65273,-23.0037 -14.4907,-54.8229 -14.4907,-95.5039l0 -283.325 -87.9911 0z"/>
               <glyph unicode="p" horiz-adv-x="556" d="M66.0107 -199.009l0 718.001 79.9898 0 0 -68.1506c18.8403,26.3299 40.1693,46.1703 64.0104,59.3352 23.655,13.1649 52.4969,19.8172 86.3164,19.8172 44.3328,0 83.3391,-11.3274 117.182,-34.1684 33.8195,-22.6549 59.3352,-54.8229 76.6636,-96.1552 17.1656,-41.4951 25.8182,-86.8281 25.8182,-136.348 0,-52.8226 -9.48992,-100.481 -28.493,-143 -19.0031,-42.3325 -46.6588,-74.8261 -82.9903,-97.481 -36.1687,-22.5153 -74.3377,-33.8427 -114.344,-33.8427 -29.3304,0 -55.6602,6.16379 -78.8268,18.4914 -23.3294,12.3508 -42.3325,27.8417 -57.3349,46.682l0 -253.181 -87.9911 0zm79.9898 455.353c0,-66.4992 13.4906,-115.67 40.3321,-147.512 27.0044,-31.8424 59.6609,-47.8217 97.9927,-47.8217 39.0063,0 72.3374,16.4911 100.016,49.4964 27.8185,32.9821 41.6579,83.9904 41.6579,153.164 0,65.9875 -13.4906,115.321 -40.6578,148.164 -27.1672,32.8426 -59.4981,49.1708 -97.1786,49.1708 -37.3317,0 -70.337,-17.5145 -98.9929,-52.3341 -28.8419,-35.0057 -43.1698,-85.6651 -43.1698,-152.327z"/>
               <glyph unicode="t" horiz-adv-x="277" d="M256.995 78.4958l12 -77.6572c-24.6613,-5.17321 -46.8305,-7.84249 -66.1651,-7.84249 -31.8306,0 -56.4919,5.00785 -74.1611,15.1653 -17.5039,10.1693 -29.8345,23.3385 -37.0038,39.8384 -7.16926,16.4999 -10.6653,51.1652 -10.6653,103.996l0 299.007 -64.9958 0 0 67.9958 64.9958 0 0 128.338 88.0036 52.8305 0 -181.169 87.9918 0 0 -67.9958 -87.9918 0 0 -304.003c0,-25.1692 1.49999,-41.3384 4.66534,-48.4959 2.99999,-7.16926 7.99603,-12.8385 14.9999,-17.1732 7.00391,-4.16927 16.996,-6.33068 29.9999,-6.33068 9.66138,0 22.4999,1.16929 38.3266,3.49605z"/>
              </font>
              <style type="text/css">
               <![CDATA[
                @font-face { font-family:"Arial";font-variant:normal;font-style:normal;font-weight:bold;src:url("#FontID1") format(svg)}
                @font-face { font-family:"Arial";font-variant:normal;font-style:normal;font-weight:normal;src:url("#FontID0") format(svg)}
                .fil0 {fill:#FEFEFE}
                .fnt3 {font-weight:normal;font-size:172.08px;font-family:"Arial"}
                .fnt0 {font-weight:normal;font-size:338.87px;font-family:"Arial"}
                .fnt2 {font-weight:normal;font-size:338.87px;font-family:"Arial"}
                .fnt1 {font-weight:bold;font-size:338.87px;font-family:"Arial"}
               ]]>
              </style>
             </defs>
             <g id="Layer_x0020_1">
              <metadata id="CorelCorpID_0Corel-Layer"/>
              <g id="_1612672846848">
               <polygon class="fil0" points="-0,1030.73 254.15,1030.73 254.15,621.27 112.95,621.27 112.95,465.95 254.15,465.95 254.15,310.63 -0,310.63 "/>
               <polygon class="fil0" points="409.47,465.95 564.78,465.95 564.78,607.15 409.47,607.15 409.47,720.11 663.62,720.11 663.62,0 409.47,0 "/>
               <g transform="matrix(0.999998 0 0 0.999998 -2446.16 -3681.99)">
                <text x="2832.69" y="4712.72" class="fil0 fnt0">Get</text>
               </g>
               <g transform="matrix(0.999998 0 0 0.999998 -1805.8 -3681.99)">
                <text x="2832.69" y="4712.72" class="fil0 fnt1">M</text>
               </g>
               <g transform="matrix(0.999998 0 0 0.999998 -1523.52 -3681.99)">
                <text x="2832.69" y="4712.72" class="fil0 fnt1">E</text>
               </g>
               <g transform="matrix(0.999998 0 0 0.999998 -1297.49 -3681.99)">
                <text x="2832.69" y="4712.72" class="fil0 fnt1">D</text>
               </g>
               <g transform="matrix(0.999998 0 0 0.999998 -1052.77 -3681.99)">
                <text x="2832.69" y="4712.72" class="fil0 fnt1">S</text>
               </g>
               <g transform="matrix(0.999998 0 0 0.999998 -826.739 -3681.99)">
                <text x="2832.69" y="4712.72" class="fil0 fnt2">.</text>
               </g>
               <g>
                <g transform="matrix(0.999998 0 0 0.999998 -744.665 -3711.86)">
                 <text x="2832.69" y="4712.72" class="fil0 fnt3">p</text>
                </g>
                <g transform="matrix(0.999998 0 0 0.999998 -648.955 -3711.86)">
                 <text x="2832.69" y="4712.72" class="fil0 fnt3">h</text>
                </g>
               </g>
              </g>
             </g>
            </svg>
               <svg width="360" x="4%" y="15%" height="120">
                   <rect width="360" x="0" y="0" height="120" style="fill:none;stroke-width:7;stroke:rgb(255,254,252)" />
                    '.$molecule_text.'
               </svg>
               <svg width="400" x="0%" y="30%" height="200">
                   <text x="7%" y="50%" font-size="40"  fill="#fffefc" '.$text_style.' >'.$row->name.'</text> 
               </svg>
               <svg width="400" x="0%" y="37%" height="200">
                   <text x="7%" y="50%" font-size="20"   fill="#fffefc" >'.$row->strength.' ( '.$row->medicine_form.' )</text> 
               </svg>
              
                  <svg width="95%" x="1%" y="55%" height="100">
                   <text x="65%" y="70%" font-size="50"   font-weight="bold"  fill="#fffefc">P</text> 
                   <text x="67.0%" y="82.5%" font-size="50"  font-weight="bold"  fill="#fffefc">X</text> 
               </svg>
               
            </svg>';
            
        $content = ob_get_clean();

            if(file_put_contents("public/svg-converter/$row->slug.svg", $content)) { // Filename for storing purpose
                echo "Success";
            }
            else {
                echo "Failed to save file";
            }
        }
    }
    # End Svg Generator